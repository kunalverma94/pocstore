(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[0],{144:function(e,t,a){e.exports=a(294)},149:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},180:function(e,t){},182:function(e,t){},196:function(e,t){},198:function(e,t){},226:function(e,t){},228:function(e,t){},229:function(e,t){},235:function(e,t){},237:function(e,t){},255:function(e,t){},258:function(e,t){},274:function(e,t){},277:function(e,t){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(51),l=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(149);var i,s=a(4),o=a(9),m=a(7),u={DATA_SERVICE:"".concat(i="https://jsondbpoc.herokuapp.com/","data"),DETAIL_SERVICE:"".concat(i,"detail"),USER_SERVICE:"".concat(i,"user"),ENABLE_LOGGING:!1,APPTITLE:"POC MOBILE SHOPPING",JWT_KEY:"password",CURRENT_REGION:"IN",DEMO:{email:"admin@admin.com",password:"admin"}},d=function(){return c.a.createElement("footer",{className:"page-footer"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col l6 s12"},c.a.createElement("h5",{className:"white-text"},u.APPTITLE),c.a.createElement("p",{className:"grey-text text-lighten-4"},"This is a Proof Of concep App of React Redux."),c.a.createElement("ul",{className:"styled-list"},c.a.createElement("li",null,"Supports Pagination ."),c.a.createElement("li",null,"Supports Search ."),c.a.createElement("li",null,"Supports Sorting ."),c.a.createElement("li",null,"Supports Session Management ."),c.a.createElement("li",null,"Supports Cart Operations ."),c.a.createElement("li",null,"Mobile/Desktop Friendly UI ."))),c.a.createElement("div",{className:"col l4 offset-l2 s12"},c.a.createElement("h5",{className:"white-text"},"Links"),c.a.createElement("ul",{className:"styled-list"},c.a.createElement("li",null,c.a.createElement("a",{className:"grey-text text-lighten-3",href:"#top"},"TOP")),c.a.createElement("li",null,c.a.createElement("a",{className:"grey-text text-lighten-3",href:"#search"},"Search")),c.a.createElement("li",null,c.a.createElement("a",{className:"grey-text text-lighten-3",href:"#search"},"Sorting")))))),c.a.createElement("div",{className:"footer-copyright"},c.a.createElement("div",{className:"container"},"\xa9 ",(new Date).toDateString(),c.a.createElement("a",{className:"grey-text text-lighten-4 right",href:"#!"},"Kunal Verma"))))},p=function(){var e=Object(s.d)((function(e){return e.session})).notification,t=e&&""!==e.type,a=Object(s.c)();return t&&setTimeout((function(){a({type:"CLOSE_NOTIFICATION"})}),4e3),t?c.a.createElement("div",{className:"notification "},c.a.createElement("div",{className:"waves-effect"},e.message?e.message+"":"something Whent Worong:")):c.a.createElement(c.a.Fragment,null)},E=a(22),f=a(23),v=a(25),h=a(24),g=function(e){return{type:"API",payload:{request:fetch("".concat(u.DATA_SERVICE,"?title_like=").concat(e.title,"&_sort=").concat(e.sortField,"&_order=").concat(e.sortOrder,"&_page=").concat(e.page,"&_limit=").concat(e.limit)),onSuccess:O}}},y=function(e){return function(t){t({type:"PAGE_CHANGE",payload:e}),t(g(e))}},N=function(){return function(e){var t={type:"PAGE_CHANGE",payload:{page:1,title:"",sortField:"",sortOrder:"",limit:4}};e(t),e(g(t.payload))}},O=function(e){return{type:"LOAD_DATA",payload:e}},b=function(e){return{type:"LOADING",payload:!1}},I=function(e){return{type:"ERROR",payload:e}},A=function(e){return{type:"LOAD_ITEM",payload:e}},j=function(e){return{type:"LOAD_DETAIL",payload:e}},w=(a(154),function(){return{type:"LOCAL_CART_UPDATE"}}),S=function(e){var t=e.item,a=Object(s.c)(),n=(t||{}).stock,r=Object(s.d)((function(e){return e.cart})).cartItems.filter((function(e){return e.id===t.id})).length,l=function(){r<n&&a(function(e){return function(t){t({type:"ADD_TO_CART",payload:e}),t(w())}}(t))},i=function(){r>=0&&a(function(e){return function(t){t({type:"REMOVE_FROM_CART",payload:e}),t(w())}}(t))};return c.a.createElement("div",{className:"cart-menu"},function(){var e=c.a.createElement("div",{className:"add-cart waves-effect",onClick:function(){return l()}},"Add To cart");return 0===n&&(e=c.a.createElement("div",null,"Out Of Stock")),r>0&&(e=c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"add-to-cart",onClick:function(){return l()}},c.a.createElement("i",{className:"material-icons"},"add_box")),c.a.createElement("div",{className:"cart-quantity"},r),c.a.createElement("div",{className:"remove-from-cart",onClick:function(){return i()}},c.a.createElement("i",{className:"material-icons"},"indeterminate_check_box")))),e}())},C=function(e){var t,a=e.item,n=e.children,r=a.id,l=a.title,i=a.image,s=a.price,m=a.stock,d=a.rating;return c.a.createElement("div",{className:"flex-item"},c.a.createElement("div",{className:"card"},c.a.createElement(o.c,{to:{pathname:"/detail?id=".concat(r)}},c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{src:i,alt:r}),c.a.createElement("span",{className:"card-title insight-rating "},c.a.createElement("i",{className:"stars material-icons filled "},"\ue838 "),c.a.createElement("span",{className:"rating"},d))),c.a.createElement("div",{className:"waves-effect"},c.a.createElement("div",{className:"card-action card-title"},c.a.createElement("div",{className:"info-title"},l)),c.a.createElement("div",{className:"card-content "},c.a.createElement("div",{className:"info-tab"},c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"Price"),c.a.createElement("div",{className:"value-price"},c.a.createElement(ce.Consumer,null,(function(e){return e.REGION[u.CURRENT_REGION]})),s)),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"Stock"),c.a.createElement("div",{className:"value-stock"},m)),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"Rating"),c.a.createElement("div",{className:"value"},(t=d,Array.apply(null,{length:5}).map((function(e,a){return c.a.createElement("i",{key:a,className:"stars material-icons "+(t<a+1?"filled":"empty")},"star")}))))),n)))),c.a.createElement("div",{className:"card-action"},c.a.createElement(S,{item:a}))))},T=function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href.split("id=").reverse()[0];this.props.getDetail(e)}},{key:"componentWillUnmount",value:function(){this.props.clear()}},{key:"render",value:function(){var e=this.props.detail,t=e.detail,a=e.item;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"details"},a&&t?c.a.createElement(C,{item:a},c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"ID"),c.a.createElement("div",{className:"value-stock"},t.id)),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"ram"),c.a.createElement("div",{className:"value-stock"},t.ram," GB")),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"storage"),c.a.createElement("div",{className:"value-storage"},t.storage," GB")),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"s-badge"},"color"),c.a.createElement("div",{className:"value-stock"},t.color," ")),c.a.createElement("div",{className:"info"},c.a.createElement("div",null," Description:"),c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt perferendis odit eveniet? Amet est id rem explicabo libero laborum sunt, similique dolor. Excepturi sed quas omnis, reprehenderit distinctio ducimus cumque.",c.a.createElement("br",null),c.a.createElement("br",null),"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt perferendis odit eveniet? Amet est id rem explicabo libero laborum sunt, similique dolor. Excepturi sed quas omnis, reprehenderit distinctio ducimus cumque.")))):c.a.createElement(c.a.Fragment,null)))}}]),a}(n.Component),L={getDetail:function(e){return function(t){t({type:"API",payload:{request:fetch("".concat(u.DATA_SERVICE,"?id=").concat(e)),onSuccess:A,OnError:I,loadSuccess:b}}),t({type:"API",payload:{request:fetch("".concat(u.DETAIL_SERVICE,"?id=").concat(e)),onSuccess:j,OnError:I,loadSuccess:b}})}},clear:function(){return{type:"CLEAR"}}},k=Object(s.b)((function(e){return{detail:e.detail}}),L)(T),_=a(1),P=(a(156),function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.Consumer,null,(function(e){return e.REGION[u.CURRENT_REGION]})),e)}),D=function(e){var t=e.data;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Device"),c.a.createElement("th",null,"Quantity"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"Total"))),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement("tr",{key:t,title:e.item.title},c.a.createElement("td",{style:{width:"1px"},className:"inline-link bill-device"},c.a.createElement(o.c,{to:{pathname:"/detail?id=".concat(e.item.id)}},c.a.createElement("div",null,e.item.id),c.a.createElement("img",{src:e.item.image,alt:"",className:"check-img"}),c.a.createElement("div",null,e.item.title.substr(0,20),"..."))),c.a.createElement("td",null,c.a.createElement(S,{item:e.item}),c.a.createElement("div",{className:"bill-quantity"},e.quantity)),c.a.createElement("td",null," ",P(e.item.price)," "),c.a.createElement("td",null," ",P(e.item.price*e.quantity)," "))})),c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,"Total Payment"),c.a.createElement("td",null,P(t.map((function(e){return e.quantity*e.item.price})).reduce((function(e,t){return e+t}),0))))))},R=function(){var e=Object(s.d)((function(e){return e})),t=e.cart,a=e.session,n=Object(_.a)(Object(_.a)({},t),a),r=n.cartItems,l=n.isLoggedIn,i=function(){var e=r.filter((function(e,t,a){return a.findIndex((function(t){return t.id===e.id}))===t})).map((function(e,t){return{item:e,quantity:r.filter((function(t){return t.id===e.id})).length}}));return e.sort((function(e,t){return e.item.id-t.item.id})),e}(),m=l?{pathname:"/payment",state:{requiredData:i}}:{pathname:"/login",state:{redirectTo:"/checkout",message:"You must be logged in to place order .Please login "}};return i.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{data:i}),c.a.createElement("div",{className:"place-order"},c.a.createElement(o.c,{to:m},c.a.createElement("button",{className:"waves-effect waves-light btn-small"},"Place Order")))):c.a.createElement("h1",null,"Cart Is empty!!")},x=(a(157),function(e){e.newPageNumber;var t=Object(s.d)((function(e){return e})),a=t.appSetting,n=t.data,r=Object(s.c)(),l=Object(_.a)(Object(_.a)({},a),n),i=l.list,o=l.searchCache,m=l.total,u=o.page,d=m/o.limit;return c.a.createElement("div",{className:"pagenation"},function(){if(""===o.title){if(0===i.length)return;return c.a.createElement("ul",{className:"pagination",style:{textAlign:"center"}},c.a.createElement("li",{className:1===u?"disabled waves-effect":"waves-effect"},c.a.createElement("a",{onClick:function(){return 1!==u&&r(y(Object(_.a)(Object(_.a)({},o),{},{page:u-1})))}},c.a.createElement("i",{className:"material-icons"},"chevron_left"))),Array.apply(null,{length:d}).map((function(e,t){return c.a.createElement("li",{key:t,onClick:function(){return t+1!==u&&r(y(Object(_.a)(Object(_.a)({},o),{},{page:t+1})))},className:t+1===u?"active":""},c.a.createElement("a",null,t+1))})),c.a.createElement("li",{className:"waves-effect ".concat(u===d?"disabled ":"")},c.a.createElement("a",{onClick:function(){return u!==d&&r(y(Object(_.a)(Object(_.a)({},o),{},{page:u+1})))}},c.a.createElement("i",{className:"material-icons"},"chevron_right"))))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-page"},c.a.createElement("div",{className:"end-result waves-effect"},"No More Result ",c.a.createElement("i",{className:"material-icons"},"\ue612")," "),c.a.createElement("div",{className:"exit-search waves-effect",onClick:function(){return r(N())}},"Exit Search ",c.a.createElement("i",{className:"material-icons"},"\ue879"))))}())}),G=(a(158),function(){return Object(s.d)((function(e){return e.appSetting})).loading?c.a.createElement("div",{className:"preloader-wrapper big active"},c.a.createElement("div",{className:"spinner-layer spinner-blue-only"},c.a.createElement("div",{className:"circle-clipper left"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"gap-patch"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"circle-clipper right"},c.a.createElement("div",{className:"circle"})))):c.a.createElement(c.a.Fragment,null)}),M=function(){return Array.apply(null,{length:4}).map((function(e,t){return c.a.createElement("div",{key:t,className:"loading flex-item card"},c.a.createElement("div",{className:"card-image",style:{padding:"15px"}},c.a.createElement("div",{style:{background:"grey",height:"300px",width:"100%",borderRadius:"5px"}})),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{style:{background:"grey",height:20}})),c.a.createElement("div",{className:"card-action"},c.a.createElement("div",{style:{background:"grey",height:20}})))}))},F=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.appSetting})).searchCache;if(0===Object(s.d)((function(e){return e.data})).list.length)return c.a.createElement(c.a.Fragment,null);var a=function(a){var n=t;n.sortOrder!==a&&(n.sortField="price",n.sortOrder=a,e(y(n)))};return c.a.createElement("div",{className:"filters"},c.a.createElement("div",{className:"waves-effect low-"+t.sortOrder,onClick:function(){return a("asc")}},"Price :Low To High"),c.a.createElement("div",{className:"waves-effect high-"+t.sortOrder,onClick:function(){return a("desc")}},"Price :High To Low"),c.a.createElement("div",{className:"waves-effect",onClick:function(){return""!==t.sortOrder&&e(N())}},"Default"))},q=(a(159),function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).showItems=function(){return e.props.loading||0===e.props.list.length?c.a.createElement(M,null):e.props.list.map((function(e,t,a){return c.a.createElement(C,{key:t,item:e})}))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.list&&0===this.props.list.length&&this.props.GetData(this.props.searchCache)}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(F,null),c.a.createElement("div",{id:"top",className:"flex"},this.showItems()))}}]),a}(n.Component)),U={GetData:g},V=Object(s.b)((function(e){return{list:e.data.list,loading:e.appSetting.loading,searchCache:e.appSetting.searchCache}}),U)(q),z=function(){return c.a.createElement("div",{className:"main"},c.a.createElement(V,null),c.a.createElement(x,null))},Y=a(143),B=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.appSetting})).searchCache,a=Object(m.f)(),r=Object(n.useState)(t.title),l=Object(Y.a)(r,2),i=l[0],o=l[1];return c.a.createElement("form",{style:{width:"100%"},onSubmit:function(t){return function(t){return t.preventDefault(),""===i.trim()?e(N()):(e(y({page:1,title:i,sortField:"id",sortOrder:"asc",limit:100})),a.push("/home")),!1}(t)}},c.a.createElement("input",{id:"search",type:"search",name:"search",className:"search-input",placeholder:"Search for products, brands and more",onInput:function(e){return o(e.target.value)},required:!0}))},H=(a(160),function(e){return{type:"LOGIN",payload:e}}),W=function(){var e=Object(s.c)(),t=Object(n.useContext)(ce).theme,a=Object(s.d)((function(e){return e})),r=a.cart,l=a.session,i=Object(_.a)(Object(_.a)({},r),l),m=i.cartItems,u=i.user,d=i.isLoggedIn;return c.a.createElement("div",{className:"z-nav"},c.a.createElement("div",{className:"z-item"},c.a.createElement(o.c,{to:"home"},c.a.createElement("div",{className:"waves-effect"},c.a.createElement("div",{className:"material-icons"},"android"),c.a.createElement("div",{className:"mh"},"POC")))),c.a.createElement("div",{className:"z-item zsearch zflex z-abs"},c.a.createElement(B,null)),c.a.createElement("div",{className:"z-item group"},c.a.createElement("ul",{id:"dropdown1",className:"\r dropdown-content"},c.a.createElement("li",null,c.a.createElement("a",null,"Welcome ",u)),c.a.createElement("li",null,c.a.createElement("a",null,"History")),c.a.createElement("li",null,c.a.createElement("a",null,"Track Order")),c.a.createElement("li",{className:"divider"}),c.a.createElement("li",null,c.a.createElement("a",{onClick:function(){e((function(e){e({type:"LOGOUT"})}))}},"Log Out"))),u&&u.length>0&&d?c.a.createElement("a",{className:"dropdown-trigger",onLoad:void new Promise((function(e){var t=setInterval((function(){var e=document.querySelectorAll(".dropdown-trigger");if(e.length>0)try{window.M.Dropdown.init(e,{coverTrigger:!1,width:"unset"})}catch(a){}finally{clearInterval(t)}}),500)})),"data-target":"dropdown1"},c.a.createElement("div",{className:"zflex waves-effect"},c.a.createElement("div",{className:"material-icons"}," person_pin"),c.a.createElement("div",{className:" mh"}," ",u),c.a.createElement("div",{className:"material-icons"},"\ue5c5"))):c.a.createElement(o.c,{to:"login"},c.a.createElement("div",{className:"zflex waves-effect"},c.a.createElement("div",{className:"material-icons"}," person_pin"),c.a.createElement("div",{className:"user"},"Login"))),c.a.createElement(o.c,{to:"checkout",className:"z-cart"},c.a.createElement("div",{className:"cart-group zflex waves-effect"},c.a.createElement("div",{className:"material-icons"},"shopping_cart"),c.a.createElement("div",{className:"z-cart-length"}," ",m.length))),c.a.createElement("a",{className:" waves-effect",onClick:function(){return document.documentElement.style.setProperty("--pr",t[Math.floor(Math.random()*t.length)])}},c.a.createElement("div",{className:"material-icons"},"settings"))))},K="INFO",J=function(e){return{type:"NOTIFICATION",payload:{type:K,message:e}}},$=function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:u.DEMO.email,password:u.DEMO.password,nextPage:"home"},e.updateValue=function(t){var a={};a[t.target.name]=t.target.value,e.setState((function(e){return Object(_.a)(Object(_.a)({},e),a)}))},e.processLogin=function(){e.props.notificationService("Logging In.Please wait");var t=e.state,a=t.email,n=t.password;e.props.login(a,n)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.state){var e=this.props.location.state,t=e.redirectTo,a=e.message;t&&""!==t&&(this.props.notificationService(a),this.setState(Object(_.a)(Object(_.a)({},this.state),{},{nextPage:t})))}}},{key:"render",value:function(){var e=this;return this.props.isLoggedIn?c.a.createElement(m.a,{to:this.state.nextPage}):c.a.createElement("div",{className:"row"},c.a.createElement("h1",null,c.a.createElement("div",{className:"waves-effect"},c.a.createElement("div",{className:"material-icons login-logo"},"android"),c.a.createElement("div",null,"POC"))),c.a.createElement("form",{onSubmit:function(t){return t.preventDefault()||e.processLogin()}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{name:"email",value:this.state.email,type:"email",style:{width:"333px"},onChange:function(t){return e.updateValue(t)},className:"validate"}),c.a.createElement("label",{className:"active",htmlFor:"email"},"Email"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{name:"password",type:"password",style:{width:"333px"},onChange:function(t){return e.updateValue(t)},className:"validate",value:this.state.password}),c.a.createElement("label",{className:"active",htmlFor:"password"},"Password"))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"waves-effect waves-light btn-large",style:{width:"100%"},type:"submit"},"Login"))))}}]),a}(n.Component),Q={login:function(e,t){return{type:"API",payload:{request:fetch("".concat(u.USER_SERVICE,"?user=").concat(e,"&password=").concat(t)),onSuccess:H}}},notificationService:J},X=Object(s.b)((function(e){return Object(_.a)({},e.session)}),Q)($),Z=a(140),ee=a.n(Z),te=function(e){return function(t){t({type:"PAYMENT_ERROR",payload:{success:!1,error:!0}}),t(I(e))}},ae=function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isAuthised:!0,bill:null},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.state){var e=this.props.location.state.requiredData;e&&(this.props.processPaymentAction(e),this.setState((function(t){return{bill:e}})))}else this.setState((function(e){return{isAuthised:!1}}))}},{key:"componentWillUnmount",value:function(){this.props.paycomplete()}},{key:"render",value:function(){var e=c.a.createElement("h1",null,"Processing payment");return this.state.isAuthised?(this.props.payment.error?e=c.a.createElement("h1",null,"Error Processing Payment"):this.props.payment.success&&(e=c.a.createElement("div",{className:"paymant-process"},c.a.createElement("h1",null,"Order Placed Succesful."),c.a.createElement("hr",null),c.a.createElement("div",null,"Your items will be delivered in 2-3 business days. "),c.a.createElement("div",{className:"bill"},c.a.createElement("div",null,"TrackID:",this.props.payment.id),c.a.createElement(D,{data:this.state.bill})))),e):c.a.createElement(m.a,{to:"home"})}}]),a}(n.Component),ne=Object(s.b)((function(e){return{payment:e.payment,session:e.session}}),{processPaymentAction:function(e){return{type:"MAKE_PAYMENT",payload:(e=e.map((function(e){return{id:e.item.id,newStock:e.item.stock-e.quantity}}))).map((function(e){return ee.a.patch("".concat(u.DATA_SERVICE,"/").concat(e.id),{stock:e.newStock})}))}},paycomplete:function(){return{type:"PAYMENT_COMPLTE"}}})(ae),ce=c.a.createContext(),re={REGION:{IN:"\u20b9",US:"$"},theme:["#3f51b5","#9c27b0","#9C27B0","#E91E63","#2196F3","#4A148C","#222"]},le=function(){var e=Object(s.d)((function(e){return e.appSetting})),t=Object(s.c)();return 0===e.appState&&t({type:"BOOT_LOCAL"}),c.a.createElement(ce.Provider,{value:re},c.a.createElement(o.a,null,c.a.createElement(o.b,null,c.a.createElement(W,null),c.a.createElement(p,null),c.a.createElement("div",{className:"main-screen"},c.a.createElement(m.b,{path:"/detail?id=:id",component:k}),c.a.createElement(m.b,{path:"/detail",component:k}),c.a.createElement(m.b,{path:"/login",component:X}),c.a.createElement(m.b,{exact:!0,path:"/checkout",component:R}),c.a.createElement(m.b,{exact:!0,path:"/payment",component:ne}),c.a.createElement(m.b,{exact:!0,path:"/home",component:z}),c.a.createElement(m.b,{exact:!0,path:"/",component:z}),c.a.createElement(G,null)))),c.a.createElement(d,null))},ie=a(32),se=a(141),oe=JSON.parse(localStorage.getItem("app")||'{"appState":1,"cartItems":[]}'),me=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=oe;a[e]=t,localStorage.setItem("app",JSON.stringify(a))},ue=function(e){if(!e||0===e.length)throw Error("No data found");return Array.isArray(e)&&1===e.length?e[0]:e},de=a(74),pe={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA":e=Object(_.a)(Object(_.a)({},e),{},{list:t.payload});break;case"REFRESH":e=Object(_.a)({},fe.data)}return e},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.session,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITILISE_APP":e=Object(_.a)(Object(_.a)({},e),t.payload.session);break;case"LOGIN":e=Object(_.a)(Object(_.a)(Object(_.a)({},e),t.payload),{},{isLoggedIn:!0});break;case"LOGOUT":e=Object(_.a)(Object(_.a)({},e),{},{isLoggedIn:!1,user:void 0,jwt:void 0});break;case"NOTIFICATION":e=Object(_.a)(Object(_.a)({},e),{},{loading:!1,notification:t.payload});break;case"CLOSE_NOTIFICATION":e=Object(_.a)(Object(_.a)({},e),{},{notification:null})}return e},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.detail,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DETAIL":e=Object(_.a)(Object(_.a)({},e),{},{detail:ue(t.payload)});break;case"LOAD_ITEM":e=Object(_.a)(Object(_.a)({},e),{},{item:ue(t.payload)});break;case"CLEAR":e=Object(_.a)(Object(_.a)({},e),{},{item:void 0,detail:void 0})}return e},appSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.appSetting,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITILISE_APP":e=Object(_.a)(Object(_.a)({},e),{},{appState:t.payload.appState});break;case"LOADING":e=Object(_.a)(Object(_.a)({},e),{},{loading:t.payload});break;case"PAGE_CHANGE":e=Object(_.a)(Object(_.a)({},e),{},{searchCache:t.payload})}return e},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.cart,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITILISE_APP":e=Object(_.a)(Object(_.a)({},e),{},{cartItems:t.payload.cartItems});break;case"ADD_TO_CART":var a=[].concat(Object(de.a)(e.cartItems),[t.payload]);e={cartItems:a};break;case"REMOVE_FROM_CART":var n=e.cartItems.findIndex((function(e){return e.id===t.payload.id}));if(n>=0){e.cartItems.splice(n,1);var c=Object(de.a)(e.cartItems);e={cartItems:c}}break;case"CHECK_OUT":e={cartItems:[]}}return e},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe.payment,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAYMENT_SUCCESS":e=Object(_.a)(Object(_.a)({},e),t.payload);break;case"PAYMENT_COMPLTE":e={};break;case"PAYMENT_ERROR":e=Object(_.a)(Object(_.a)({},e),t.payload)}return e}},Ee=a(142),fe={data:{list:[]},detail:{},session:{user:"",jwt:"",isLoggedIn:!1,notification:{type:"",message:""}},cart:{cartItems:[]},appSetting:{appState:0,title:"POC e-Shop",loading:!1,total:20,searchCache:{page:1,title:"",sortField:"",sortOrder:"",limit:4}},payment:{id:null}},ve=[se.a,function(e){return function(e){return function(t){u.ENABLE_LOGGING&&(console.log("current action :",t),console.log("logging here..."),console.log(e)),e(t)}}},function(e){return function(e){return function(t){if("API"===t.type){var a=t.payload,n=a.onSuccess,c=a.request;e({type:"LOADING",payload:!0}),setTimeout((function(){try{c.then((function(e){return e.json?e.json():e})).then((function(t){e(n(t))})).catch((function(t){e(I(t))})).finally(e({type:"LOADING",payload:!1}))}catch(t){e(I(t))}finally{e({type:"LOADING",payload:!1})}}),500),e(t)}else e(t)}}},function(e){return function(t){return function(a){if("MAKE_PAYMENT"===a.type){e.dispatch({type:"LOADING",payload:!0});var n=e.getState().session.jwt,c=Ee.verify(n,u.JWT_KEY);n&&c?setTimeout((function(){Promise.all(a.payload).then((function(t){var a;t.every((function(e){return 200===e.status}))&&e.dispatch((a="POC#".concat(Math.floor(1e5*Math.random()),"#ABC"),function(e){e({type:"PAYMENT_SUCCESS",payload:{id:a,success:!0}}),e({type:"REFRESH"}),e({type:"CHECK_OUT"}),e({type:"LOCAL_CART_UPDATE"})}))})).catch((function(t){return e.dispatch(te(t))})).finally(e.dispatch({type:"LOADING",payload:!1}))}),1500):(e.dispatch(te("Server Authentication Failed")),e.dispatch({type:"LOADING",payload:!1}))}t(a)}}},function(e){return function(t){return function(a){if("LOGIN"===a.type){t({type:"LOADING",payload:!0});var n=ue(a.payload),c=n.jwt,r=n.user;me("session",{jwt:c,user:r,isLoggedIn:!0}),a.payload={jwt:c,user:r},t({type:"LOADING",payload:!1}),e.dispatch(J("Welcom "+r))}"LOGOUT"===a.type&&(t({type:"LOADING",payload:!0}),setTimeout((function(){var a=oe.session;me("session",Object(_.a)(Object(_.a)({},a),{},{isLoggedIn:!1})),t({type:"LOADING",payload:!1}),e.dispatch(J("Logged out Successful"))}),1500)),t(a)}}},function(e){return function(t){return function(a){"LOCAL_CART_UPDATE"===a.type&&me("cartItems",e.getState().cart.cartItems),"BOOT_LOCAL"===a.type&&t({type:"INITILISE_APP",payload:oe}),t(a)}}},function(e){return function(e){return function(t){"ERROR"!==t.type?e(t):e({type:"NOTIFICATION",payload:{type:"ERROR",message:t.payload}})}}}],he=Object(ie.d)(Object(ie.c)(pe),fe,ie.a.apply(void 0,ve));l.a.render(c.a.createElement(s.a,{store:he},c.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.6ddf3a99.chunk.js.map